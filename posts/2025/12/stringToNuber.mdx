---
title: 'string to number function'
description: 'String을 Number로 변환하는 함수를 직접 구현해보기 (Number 사용 x, 오로지 직접 사칙연산을 이용하여 구현)'
date: '2025-12-21'
tags: ['javascript']
published: true
---

## 배경

js에서 '123' 과 같은 숫자형태의 문자열은 Number('123') 과 같이 Number를 이용하여 숫자로 변환할 수 있다.

이런 js 표준 내장객체인 Number를 직접 구현해보았다.

## 참고사항

만약 숫자가 아닌형태가 파라미터로 주어지면 'invalid string'을 반환하도록 설계하였다.

예를들어 '--123', '-0.0.1' 과 같은 경우 모두 숫자가 아니기에 'invalid string'을 반환한다.

## 구현 코드

구현시 아래와 같은 엣지 케이스들을 모두 고려해야 하기 때문에 생각보다 많은 사항을 고려해야 한다.

- '1-123' -> 'invalid string' ( -가 첫번째가 아니고 숫자 중간에 껴있을경우 )
- '.1' -> 'invalid string' ( . 앞에 숫자가 오지 않는 경우)
- '0..10' -> 'invalid string' ( .가 두번 등장하는경우 )
- '123ab123' -> 'invalid string' ( 숫자가 아닌 문자가 포함되어 있을경우 )
- ' ' -> 'invalid string' ( 빈 문자열인 경우 )
- '1.' -> 'invalid string' ( . 뒤에 숫자가 오지 않는 경우)

```js
// string이 주어질때 숫자로 변환하는 함수를 직접 만들어보기

const stringToNum = (str) => {
  const map = {
    0: 0,
    1: 1,
    2: 2,
    3: 3,
    4: 4,
    5: 5,
    6: 6,
    7: 7,
    8: 8,
    9: 9,
  }

  const isString = (ch) => {
    if (map[ch] === undefined) {
      return true
    }
    return false
  }

  const digits = str.split('')
  let isMinus = false
  let answer = 0
  let seenDot = false
  let dotIndex = 0
  let fractionalPart = 0
  let seenAnyDigit = false
  let seenFractionalDigit = false

  for (let i = 0; i < digits.length; i++) {
    const digit = digits[i]

    // 맨 앞자리가 - 인 경우
    if (i === 0 && digit === '-') {
      isMinus = true
      continue
    }

    // '.' 이 맨 앞에 오는 경우
    if (i === 0 && digit === '.') {
      return 'invalid string'
    }

    // 소수점 시작 전 처리
    if (digit === '.') {
      if (seenDot) {
        return 'invalid string'
      }
      seenDot = true
      continue
    }

    // 숫자가 아닌경우 예외처리
    if (isString(digit)) {
      return 'invalid string'
    }

    seenAnyDigit = true

    if (seenDot) {
      seenFractionalDigit = true
      // 소수점 오차를 최소화 하기 위해 10의 제곱승을 곱하여 더하고 마지막에 나누어준다.
      fractionalPart = fractionalPart * 10 + map[digit]
      ++dotIndex

      continue
    }

    answer = answer * 10 + map[digit]
  }

  // 숫자가 하나도 없는 경우
  if (!seenAnyDigit) {
    return 'invalid string'
  }

  // . 이 있는데 숫자가 하나도 없는 경우
  if (seenDot && !seenFractionalDigit) {
    return 'invalid string'
  }

  // 소수점영역 처리 ( 부동소수점 오차를 최소화 하기 위해 10의 제곱승을 곱하여 더하고 마지막에 나누어준다.)
  if (seenDot) {
    answer = answer + fractionalPart / 10 ** dotIndex
  }

  return isMinus ? -1 * answer : answer
}

// TC (정수 케이스)
console.log(stringToNum('10'))
console.log(stringToNum('-10'))
console.log(stringToNum('--10'))
console.log(stringToNum('1010'))
console.log(stringToNum('0010'))

// TC (소수점 케이스)
console.log(stringToNum('10.1010'))
console.log(stringToNum('0.1010'))
console.log(stringToNum('10-.1010'))
console.log(stringToNum('.1010'))
console.log(stringToNum('0.10.10'))

// 추가 TC
console.log(stringToNum(''))
console.log(stringToNum('a'))
console.log(stringToNum('-'))
console.log(stringToNum('.'))
console.log(stringToNum('.0.9'))
console.log(stringToNum('1.'))
console.log(stringToNum('-0.a'))
```
